# Connection information
Database that server connects to:
  * URI: bolt://localhost
  * Username: neo4j
  * Password: secret
  
Host: localhost:8081

NOTE: BAD REQUEST response due to invalid input are omitted in the APIs

# Community Service

Communities are created in a graph structure using Neo4j as the database.

## Features of Nodes

id (Long) is internal id of the node generated by neo4j

name (String) is the name of the community

removed (boolean) determines whether the node is user-facing or not
  * Hides communities from users
  * Helps prevent errors
  
## Relationships of Nodes:

[:INCLUDES_COMMUNITY] -> Community (a community can have subcommunities)

[:HAS_EVENT] -> Event (a community can have events tied to that community)

[:JOINED {date: Date, proficiencyLevel: int}] <- User (users can join communities)

## API
### Create Community
Creates a community

* **URL**

  /rest/fanlinc/communities

* **Method:**

  `POST`

* **Data Params**

    **Required:**
 
   `name: String`
   
    **Optional:**
 
   `parentId: Long`

* **Success Response:**

  * **Code:** 200 OK <br/>
    **Content:** Long (id of created community)
 
* **Error Response:**

  * **Code:** 404 NOT FOUND <br/>
    **Reason:** Parent does not exist

### Get Community
Get a community information (including it's descendant communities)

* **URL**

  /rest/fanlinc/communities/{id}

* **Method:**

  `GET`

* **URL Params**

    **Required:**
 
   `id: Long`

* **Success Response:**

  * **Code:** 200 OK <br/>
  **Response:** `{id: Long, name: String, removed: boolean, subcommunities: [Community
  ], numberOfJoined: int, events: [Event]}`

### Get Communities
Gets a list of all communities with their basic information: id, name, removed, themeImage

* **URL**

  /rest/fanlinc/communities

* **Method:**

  `GET`

* **Success Response:**

  * **Code:** 200 OK <br/>
    **Content** `[Community]`

### Edit Community
Edit community with given id

* **URL**

  /rest/fanlinc/communities/{id}

* **Method:**

  `PUT`
  
 * **URL Params**

    **Required:**
 
   `id: Long`
   
 * **Data Params**
  
   **Optional:**
   
   `name: String`
   
   `parentId: Long`

* **Success Response:**

  * **Code:** 200 OK

* **Error Response:**

  * **Code:** 404 NOT FOUND<br/>
    **Reason:** Community to edit does not exist
    
  * **Code:** 400 BAD REQUEST<br/>
    **Reason:** New parent community not found
  
  * **Code:** 403 FORBIDDEN<br/>
    **Reason:** Cannot set current community's descendent community as parent

### Remove Parent Community
Sets the community to base community - a community without parent community

* **URL**

  /rest/fanlinc/communities/{id}/removeParent

* **Method:**

  `PUT`

* **URL Params**

    **Required:**
 
   `id: Long`

* **Success Response:**

  * **Code:** 200 OK

* **Error Response:**

  * **Code:** 404 NOT FOUND<br/>
    **Reason:** Community to remove parent does not exist
    
### Remove Community
Removes community (hides from users by changing "removed" into true)

* **URL**

  /rest/fanlinc/communities/{id}

* **Method:**

  `DELETE`

* **URL Params**

    **Required:**
 
   `id: Long`

* **Success Response:**

  * **Code:** 200 OK

* **Error Response:**

  * **Code:** 404 NOT FOUND <br/>
    **Reason:** Community to remove does not exist
    
   * **Code:** 403 FORBIDDEN <br/>
    **Reason:** Cannot remove community if subcommunities weren't removed first

### Get Community Events
Get a events of a community

* **URL**

  /rest/fanlinc/communities/{id}/getEvents

* **Method:**

  `GET`

* **URL Params**

    **Required:**
 
   `id: Long`

* **Success Response:**

  * **Code:** 200 OK <br/>
  **Response:** `[Event]`


# Event Service
Events are created in a graph structure using Neo4j as the database.

## Features of Nodes

id (Long) is internal id of the node generated by neo4j

name (String) is the name of the event

location (String) is the location where event happens

startDate (Date) is date time when event happens

endDate (Date) is date time when event ends
  
## Relationships of Nodes:

[:HAS_EVENT] <- Community (an event must be tied to some community)

[:HOSTING] <- User (users that are hosting the event)

[:ATTENDING] <- User (users that are attending the event)

[:HAS_POST] -> Post (events can have posts)

## API
### Get Event
Get a event information

* **URL**

  /rest/fanlinc/events/{id}

* **Method:**

  `GET`

* **URL Params**

    **Required:**
 
   `id: Long`

* **Success Response:**

  * **Code:** 200 OK <br/>
  
  **Response:** `{id: Long, themeImage: String, name: String, description:String, location: String
  , startDate: Date, endDate: Date, hostingUsers: [uid(String)], attendingUsers: [uid(String)], posts: [Post]}`
  
* **Error Response:**

  * **Code:** 404 NOT FOUND <br/>
    **Reason:** Event does not exist
    
# User Profile Service

Users and their relationships with communities and events are created and stored in Neo4j.

## Features of Nodes

id (Long) is internal id of the node generated by neo4j

uid (String) is uid of the user created in identity service
  
## Relationships of Nodes:

[:JOINED {date: Date, proficiencyLevel: int}] -> community (users can join communities)

[:HOSTING] -> Event (users can host events)

[:ATTENDING] -> Event (users can attend events)

[:POSTED] -> Post (users can create posts) 

## API
### Create User
Creates a user

NOTE: MUST BE CALLED WHENEVER A USER IS CREATED IN IDENTITY SERVICE ON SIGN UP

* **URL**

  /rest/fanlinc/users

* **Method:**

  `POST`

* **Data Params**

    **Required:**
 
   `uid: String`

* **Success Response:**

  * **Code:** 200 OK <br/>
 
* **Error Response:**

  * **Code:** 409 CONFLICT <br/>
    **Reason:** User already exists

### Get User
Get a user information, and relationships

* **URL**

  /rest/fanlinc/users/{uid}

* **Method:**

  `GET`

* **URL Params**

    **Required:**
 
   `uid: String`

* **Success Response:**

  * **Code:** 200 OK <br/>
  **Response:** `{id: Long, uid: String, joinedCommunities: [Joined], hostingEvents: [Event], attendingEvents: [Event]`<br/>
    Where `Joined: {uid: String, communityId: Long, proficiencyLevel: int, joinedDate: Date}`
 
* **Error Response:**

  * **Code:** 404 NOT FOUND <br/>
    **Reason:** User does not exist

### Joined Community
Returns true if user joined a community

* **URL**

  /rest/fanlinc/users/{uid}/joinedCommunity/{cid}

* **Method:**

  `GET`

* **URL Params**

    **Required:**
 
   `uid: String`
   
   `cid: Long`

* **Success Response:**

  * **Code:** 200 OK <br/>
    **Response** boolean
 
* **Error Response:**

  * **Code:** 404 NOT FOUND <br/>
    **Reason:** User or Community does not exist
    
### Join Community
Creates a JOINED relationship between user and community - user joins community

* **URL**

  /rest/fanlinc/users/{uid}/joinCommunity

* **Method:**

  `PUT`

* **URL Params**

    **Required:**
 
   `uid: String`

* **Data Params**

    **Required:**
 
   `communityId: Long`
   
   `proficiencyLevel: int`

* **Success Response:**

  * **Code:** 200 OK <br/>
 
* **Error Response:**

  * **Code:** 404 NOT FOUND <br/>
    **Reason:** User or Community does not exist
    
  * **Code:** 409 CONFLICT <br/>
    **Reason:** User already joined Community

### Leave Community
Removes a JOINED relationship between user and community - user leaves community

* **URL**

  /rest/fanlinc/users/{uid}/leaveCommunity

* **Method:**

  `PUT`

* **URL Params**

    **Required:**
 
   `uid: String`

* **Data Params**

    **Required:**
 
   `communityId: Long`

* **Success Response:**

  * **Code:** 200 OK <br/>
 
* **Error Response:**

  * **Code:** 404 NOT FOUND <br/>
    **Reason:** User or Community does not exist, or User never joined Community
    
### Change Proficiency Level
Change Proficiency Level with which User joined the Community

* **URL**

  /rest/fanlinc/users/{uid}/changeProficiencyLevel

* **Method:**

  `PUT`

* **URL Params**

    **Required:**
 
   `uid: String`

* **Data Params**

    **Required:**
 
   `communityId: Long`
   
   `proficiencyLevel: int`

* **Success Response:**

  * **Code:** 200 OK <br/>
 
* **Error Response:**

  * **Code:** 404 NOT FOUND <br/>
    **Reason:** User or Community does not exist, or User never joined Community
    
### Host Event
Creates an Event in a Community, and adds User to the hosting users list

* **URL**

  /rest/fanlinc/users/{uid}/hostEvent

* **Method:**

  `POST`

* **URL Params**

    **Required:**
 
   `uid: String`

* **Data Params**

    **Required:**
 
   `communityId: Long`
   
   `name: String`
   
   `description: String`
   
   `location: String`
   
   `startDate: String of strict form "dd-MM-yyyy HH:mm"`
   
   `endDate: String of strict form "dd-MM-yyyy HH:mm"`

* **Success Response:**

  * **Code:** 200 OK <br/>
    **Response:** `Long (id of newly created Event)`
 
* **Error Response:**

  * **Code:** 404 NOT FOUND <br/>
    **Reason:** User or Community does not exist

  * **Code:** 403 Forbidden <br/>
    **Reason:** User cannot host an event in a community user did not join

### Cohost Event
Adds given user to list of hosting users of Event

* **URL**

  /rest/fanlinc/users/{uid}/cohostEvent

* **Method:**

  `PUT`

* **URL Params**

    **Required:**
 
   `uid: String`

* **Data Params**

    **Required:**
 
   `eventId: Long`

* **Success Response:**

  * **Code:** 200 OK <br/>
 
* **Error Response:**

  * **Code:** 404 NOT FOUND <br/>
    **Reason:** User or Event does not exist

  * **Code:** 403 Forbidden <br/>
    **Reason:** User cannot cohost an event in a community user did not join

### Attend Event
Adds given user to list of attending users of the Event

* **URL**

  /rest/fanlinc/users/{uid}/attendEvent

* **Method:**

  `PUT`

* **URL Params**

    **Required:**
 
   `uid: String`

* **Data Params**

    **Required:**
 
   `eventId: Long`
   
* **Success Response:**

  * **Code:** 200 OK <br/>
 
* **Error Response:**

  * **Code:** 404 NOT FOUND <br/>
    **Reason:** User or Event does not exist

### Edit Event
Edits given Event (User must be a host)

* **URL**

  /rest/fanlinc/users/{uid}/editEvent

* **Method:**

  `PUT`

* **URL Params**

    **Required:**
 
   `uid: String`

* **Data Params**

    **Required:**
 
   `eventId: Long`
   
    **Optional:**
    
     `name: String`
     
     `description: String`
       
     `location: String`
       
     `startDate: String of strict form "dd-MM-yyyy HH:mm"`
       
     `endDate: String of strict form "dd-MM-yyyy HH:mm"`
   
* **Success Response:**

  * **Code:** 200 OK <br/>
 
* **Error Response:**

  * **Code:** 404 NOT FOUND <br/>
    **Reason:** User or Event does not exist
    
  * **Code:** 403 FORBIDDEN <br/>
      **Reason:** User must be a host of the event to edit the event

### Delete Event
Deletes given Event (User must be a host)

* **URL**

  /rest/fanlinc/users/{uid}/deleteEvent

* **Method:**

  `PUT`

* **URL Params**

    **Required:**
 
   `uid: String`

* **Data Params**

    **Required:**
 
   `eventId: Long`
   
* **Success Response:**

  * **Code:** 200 OK <br/>
 
* **Error Response:**

  * **Code:** 404 NOT FOUND <br/>
    **Reason:** User or Event does not exist
    
  * **Code:** 403 FORBIDDEN <br/>
      **Reason:** User must be a host of the event to delete the event

### Add Event Post
Creates and adds a Post to an Event (User must be a host)

* **URL**

  /rest/fanlinc/users/{uid}/addEventPost

* **Method:**

  `POST`

* **URL Params**

    **Required:**
 
   `uid: String`

* **Data Params**

    **Required:**
 
   `eventId: Long`
   
    **Optional:**
    
    `title : String`
    
    `description: String`
    
    `imageLink: String`
   
* **Success Response:**

  * **Code:** 200 OK <br/>
 
* **Error Response:**

  * **Code:** 404 NOT FOUND <br/>
    **Reason:** User or Event does not exist
    
  * **Code:** 403 FORBIDDEN <br/>
      **Reason:** User must be a host of the event to create a Post in the event

### Posted Post?
Returns true if user posted the post

* **URL**

  /rest/fanlinc/users/{uid}/postedPost/{pid}

* **Method:**

  `DELETE`

* **URL Params**

    **Required:**
 
   `uid: String`
   
   `pid: Long`
   
* **Success Response:**

  * **Code:** 200 OK <br/>
    **Response:** boolean
 
* **Error Response:**

  * **Code:** 404 NOT FOUND <br/>
    **Reason:** User or Post does not exist

### Delete Post
Deletes a post (User must be the poster)

* **URL**

  /rest/fanlinc/users/{uid}/deleteEvent

* **Method:**

  `DELETE`

* **URL Params**

    **Required:**
 
   `uid: String`

* **Data Params**

    **Required:**
 
   `postId: Long`
   
* **Success Response:**

  * **Code:** 200 OK <br/>
 
* **Error Response:**

  * **Code:** 404 NOT FOUND <br/>
    **Reason:** User or Post does not exist
    
  * **Code:** 403 FORBIDDEN <br/>
      **Reason:** User must be poster of the Post

### Edit Post
Edits a Post

* **URL**

  /rest/fanlinc/users/{uid}/editPost

* **Method:**

  `PUT`

* **URL Params**

    **Required:**
 
   `uid: String`

* **Data Params**

    **Required:**
 
   `postId: Long`
   
    **Optional:**
    
    `title : String`
    
    `description: String`
    
    `imageLink: String`
   
* **Success Response:**

  * **Code:** 200 OK <br/>
 
* **Error Response:**

  * **Code:** 404 NOT FOUND <br/>
    **Reason:** User or Post does not exist
    
  * **Code:** 403 FORBIDDEN <br/>
      **Reason:** User must be the one who posted the Post to edit it
